<!DOCTYPE html>
<html lang="en">
<head>
	<title>JS FE</title> 
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1"> 
	<meta name="keywords" content="Js HTML CSS markup front-end">
	<style>
		*{
			box-sizing: border-box;
		}
		canvas{
			border: 1px solid black;
			width: 500px;
			height: 300px;
		}
	
	</style>
</head>
<body>

	<canvas id="mad_balls" width="500" height="300"></canvas>



<script>

	const canvas = document.getElementById('mad_balls');
	const ctx = canvas.getContext('2d');
	const cW = canvas.offsetWidth;// canvas width
	const cH = canvas.offsetHeight;// canvas height

	let balls = [];
	const maxBalls = 10;
	const maxRad = 20;
	const minRad = 5;
	const d_x = 3;
	const d_y = 3;
	let interval;


	interval = setInterval(function(){
		if(balls.length < maxBalls){
			createBall();
		}
		else{
			clearInterval(interval);
		}
	}, 1000);


	function createBall(){
		let rad = Math.floor(Math.random()*(maxRad - minRad) + minRad);
		let red = Math.floor(Math.random()*255);
		let green = Math.floor(Math.random()*255);
		let blue = Math.floor(Math.random()*255);
		let color = `rgb(${red}, ${green}, ${blue})`;

		let ball = {
			x: Math.floor(Math.random()*(cW - rad)+rad),
			y: Math.floor(Math.random()*(cH - rad)+rad),
			r: rad,
			color: color,
			d_x: d_x,
			d_y: d_y
		}

		balls.push(ball);

	}

	function drawBall(ball){
		ctx.fillStyle = ball.color;
		ctx.beginPath();
		ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI * 2, true); 
		ctx.fill();

		ball.x += ball.d_x;
		ball.y += ball.d_y;

		if(ball.x <= ball.r || ball.x >= cW - ball.r){
			ball.d_x = -ball.d_x;
		}
		if(ball.y <= ball.r || ball.y >= cH - ball.r){
			ball.d_y = -ball.d_y;
		}

	}



	function update(){
		clearCanvas();
		for(let b of balls){
			drawBall(b);
		}
	} 


	function clearCanvas(){
		ctx.clearRect(0,0, cW, cH);
	}

	setInterval(update, 22);



</script>

</body>
</html>
