<!DOCTYPE html>
<html lang="en">
<head>
	<title>JS FE</title> 
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1"> 
	<meta name="keywords" content="Js HTML CSS markup front-end">
	<link rel="stylesheet"  href="main.css" >
</head>
<body>



<script>
	
// OOP

// obects and proto

let alive = {
	exist: true,
	breathe(){
		console.log('Breath in........ Breath out');
	}
}

let animal = {
	eat: true,
	__proto__: alive
}

let rabbit = {
	jump: true,
	__proto__: animal
}

// alive.__proto__ = rabbit; // TypeError: Cyclic __proto__ value

console.log(rabbit.eat);

for(let prop in rabbit){
	if(rabbit.hasOwnProperty(prop)){
		console.log(prop);
	}
}


rabbit.breathe();




//  function constructor


function Gadget(name){
	this.name = name;
	this.enabled = false;

	this.enable = function(){
		this.enabled = true;
		console.log(`${this.name} is enabled`);
	}

	this.disable = function(){
		this.enabled = false;
		console.log(`${this.name} is disabled`);
	}
}

let fridge = new Gadget('Samvisung');
fridge.enable();
fridge.disable();



function CoffeeMachine(name, c){

	Gadget.call(this, name);

	this._waterAmount = 0;
	this.capacity = c;
	this.min_water = 100;
	this.has_beans = false;
	this.waterIsHeated = false;

	this.parentEnable = this.enable;

	this.enable = function(){
		this.parentEnable(); // –≤—ã–∑–≤–∞–ª–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π enable()
		setTimeout(() => {
			this.waterIsHeated = true;
			console.log('Ready to use');
		}, 500);
	}

	this.waterAmount = function(){
		if(arguments.length == 0){
			console.log(this._waterAmount);
		}
		else{
			if(typeof(arguments[0]) !== 'number'){
				console.error('Please, use water instead');
			}
			else{
				if(arguments[0] < 0){
					console.warn(`Don't use this water for uoyr own purposes!`);
				}
				else if(arguments[0] + this._waterAmount > this.capacity){
					console.error('Caution! Wet floor!');
				}
				else{
					this._waterAmount += arguments[0];
					console.log(`Current waterAmount is ${this._waterAmount}`);
				}
			}
		}
	}

	this.addCoffee = function(amount){
		this.has_beans = true;
	}

	this.run = function(drink){
		console.log(this._waterAmount);
		// console.log(this.has_beans);
		console.log(this);
		console.log(this.enabled);
		if(this._waterAmount >= this.min_water && this.has_beans  && this.enabled){
			console.log(`Preparing ${drink}...`);
			setTimeout(() =>console.log(`${drink} is ready`), 1000);
		}
		else{
			console.error('Can not brew coffee');
		}
	}
}


let saeco = new CoffeeMachine('Saeco 2f', 900);

saeco.run();
saeco.enable();
saeco.waterAmount();
saeco.waterAmount(90);
saeco.waterAmount(1110);
saeco.waterAmount(110);
saeco.addCoffee(16);
// saeco.run();
setTimeout(saeco.run.call(saeco,'espresso'), 2000);

saeco.disable();


// F.prototype

function Animal(type, name){
	this.name = name;
	this.type = type;
	this.speed = 0;
	this.isRunning;
}

Animal.prototype.run = function(){
	this.isRunning = setInterval( run.bind(this), 200);
}

function run(){
	this.speed += 1;
	console.log(`${this.type} ${this.name} is running with speed ${this.speed} km/h`);
}

Animal.prototype.stop = function(){
	clearInterval(this.isRunning);
	this.speed = 0;
	console.log(`${this.type} ${this.name}'s speed ${this.speed} km/h`);
}

let leo = new Animal('Lion', 'Leo');
// leo.run();



function Cat(type,name){
	Animal.call(this, type, name);
	this.isPlaying = false;

	this.isRunning;
	// methods will be applied here via Cat.prototype
}

Cat.prototype.run = function() {
	this.isRunning = setInterval( run.bind(this), 200);
}

Cat.prototype.purr = function(){
	console.warn('Mrrrrrr');
}
Cat.prototype.play = function(){
	this.isPlaying = true;
	console.log(`${this.type} ${this.name} is playing`);
}


let murzik = new Cat('Siberian', 'Murzius II');

murzik.purr();
murzik.play();
// murzik.run();


// Classes OOP

class Vehicle{
	constructor(type, year, model){
		this.type = type;
		this.year = year;
		this.model = model;
		this.fuel = 0;
		this.fuelCapacity = 70;
	}

	sell(){
		console.warn(`–ü—Ä–æ–¥–∞–º ${this.type} ${this.model} ${this.year} –≥–æ–¥–∞ –≤—ã–ø—É—Å–∫–∞ –Ω–µ –±–∏—Ç, –Ω–µ –∫—Ä–∞—à–µ–Ω`);
	}

	addFuel(amount){
		if(this.fuel + amount < this.fuelCapacity){
			this.fuel += amount;
			console.log(`–ó–∞–ª–∏–ª–∏ ${amount} –ª–∏—Ç—Ä–æ–≤`);
		}
	}

	drive(){
		console.log(`${this.model} –ø–æ–µ—Ö–∞–ª, 50–∫–º/—á`);
	}
}

let zil = new Vehicle('–ì—Ä—É–∑–æ–≤–∏–∫', 1989, '–ó–ò–õ');
zil.addFuel(20);
zil.sell();


class ElectroCar extends Vehicle{
	constructor(type, year, name){
		super(type, year, name); // –≤—ã–∑—ã–≤–∞–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
	}

	addFuel(){
		console.warn('–ù–µ –æ—Ç–∫–ª—é—á–∞–π—Ç–µ –∑–∞—Ä—è–¥–Ω—ã–π –∫–∞–±–µ–ª—å –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞');
		setTimeout(console.log('üîå'), 500);
	}

	drive(){
		super.drive();
		console.log('üö•');
	}
}


let tesla = new ElectroCar('Electric car', 2020, 'Tesla model X');

tesla.addFuel();
tesla.drive();
tesla.sell();


//  –î–ó 1) –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –∫–æ—Ñ–µ–≤–∞—Ä–∫—É –Ω–∞ –∫–ª–∞—Å—Å—ã, –∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã (***–º–æ–∂–µ—Ç–µ –æ–ø–∏—Å—ã–≤–∞—Ç—å –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏)

</script>

</body>
</html>
