<!DOCTYPE html>
<html lang="en">
<head>
	<title>JS FE</title> 
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1"> 
	<meta name="keywords" content="Js HTML CSS markup front-end">
	<link rel="stylesheet"  href="main.css" >
</head>
<body>



<script>


// )в массиве есть обьекты с товарами, у них может быть свойство "акция". вывести в консоль только те товары, у которых она есть

let catalog = [
	{
		name: 'book',
		price: 29,
		sale: ''
	},
	{
		name: 'wimmelbuch',
		price: 119,
		sale: '-20%'
	},
	{
		name: 'watercolor',
		price: 19,
		sale: '-30%'
	},
	{
		name: 'stickerbook',
		price: 42,
		sale: ''
	}
];

function sortCatalog(field){
	let copy = catalog.slice();
	copy.sort(function(a, b){
		if(a[field] > b[field]){
			return 1;
		}
		else if(a[field] < b[field]){
			return -1;
		}
		else{
			return 0;
		}
	});
	console.log(copy);
}

sortCatalog('name');
sortCatalog('price');
sortCatalog('sale');



// написать функцию, которая принимает два параметра - начало и конец диапазона и считает сумму чисел в нем. если в этом промежутке есть уже посчитанные, то взять из результатов предыдущих вызовов


function sumRange(){
	let prevResults = [];

	return function(min, max){

		let result = {};
		let sum = 0;
		let rangeWasSelected = false;

		if(min > max){
			let a = max;
			max = min;
			min = a;
		}

		res = {
			start: min,
			end: max
		}

		prevResults.sort(function(a,b){
			if(a.result > b.result){
				return -1;
			}
			else if(a.result < b.result){
				return 1;
			}
			else{
				return 0;
			}
		});

		if(prevResults.length == 0){
			sum += sumR(min, max);
		}

		prevResults.forEach(item => {
			if(item.start == min && item.end <= max && !rangeWasSelected){
				sum = item.result;
				min = item.end + 1;
				sum += sumR(min, max);
				rangeWasSelected = true;
			}
			else if(item.end == max && item.start >=min && !rangeWasSelected){
				sum = item.result;
				max = item.start - 1;
				sum += sumR(min, max);
				rangeWasSelected = true;
			}
			else if(item.start >= min && item.end <= max && !rangeWasSelected){
				sum += item.result;
				sum += sumR(min, item.start-1);
				sum += sumR(item.end+1, max);
				rangeWasSelected = true;
			}
			else{
				if(!rangeWasSelected){
					sum += sumR(min, max);
					rangeWasSelected = true;
				}
			}
		});

		res.result = sum;


		prevResults.push(res);

		console.log(prevResults);
	}
}

function sumR(a,b){
	let res = 0;
	for(let i = a; i <= b; i++){
		res += i;
	}
	return res;
}

let counter = sumRange();

counter(2,5);
counter(2,7);
counter(1,9);



</script>

</body>
</html>
